import { Show, createSignal } from "solid-js";
import URLShortener from "./URLShortener";
import QRCode from "./QRCode";

const DARK_ICON_COLOR = "#242424";
const LIGHT_ICON_COLOR = "#fff6f0";

function MainBox({ theme }: { theme: () => string }) {
  const [selectedOption, setSelectedOption] = createSignal("shorturl");

  return (
    <div class="w-full mt-20 flex items-center justify-center z-10 relative flex-col gap-0">
      <div class="flex flex-row items-center justify-evenly w-1/2">
        <div
          class="bg-background px-4 py-3 rounded-tl-md rounded-tr-md hover:bg-primary hover:cursor-pointer z-10 flex flex-row items-center justify-center gap-2 text-text font-poppins"
          onClick={() => setSelectedOption("shorturl")}
          classList={{
            "border-t-2 border-l-2 border-r-2 border-primary":
              selectedOption() === "shorturl",
          }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="23"
            viewBox="0 0 22 23"
            fill="none"
          >
            <path
              d="M11.7193 16.6159C11.8154 16.7117 11.8917 16.8255 11.9438 16.9509C11.9958 17.0762 12.0226 17.2106 12.0226 17.3463C12.0226 17.4821 11.9958 17.6164 11.9438 17.7418C11.8917 17.8671 11.8154 17.981 11.7193 18.0768L11.2088 18.5873C10.2415 19.5546 8.92959 20.098 7.56163 20.098C6.19367 20.098 4.88174 19.5546 3.91445 18.5873C2.94715 17.62 2.40373 16.308 2.40373 14.9401C2.40373 13.5721 2.94715 12.2602 3.91445 11.2929L5.98726 9.22094C6.91666 8.28924 8.16713 7.74816 9.48253 7.70854C10.7979 7.66891 12.0787 8.13374 13.0625 9.00781C13.1641 9.0981 13.2469 9.2075 13.3061 9.32978C13.3654 9.45206 13.4001 9.58482 13.408 9.72048C13.416 9.85614 13.3972 9.99205 13.3527 10.1204C13.3081 10.2488 13.2387 10.3672 13.1484 10.4687C13.0581 10.5703 12.9487 10.6531 12.8265 10.7124C12.7042 10.7717 12.5714 10.8063 12.4358 10.8143C12.3001 10.8223 12.1642 10.8034 12.0358 10.7589C11.9074 10.7144 11.7891 10.645 11.6875 10.5547C11.0975 10.0307 10.3297 9.75201 9.54105 9.7755C8.75238 9.79898 8.00249 10.1229 7.44476 10.681L5.37367 12.7504C4.79338 13.3307 4.46738 14.1177 4.46738 14.9384C4.46738 15.759 4.79338 16.546 5.37367 17.1263C5.95395 17.7066 6.74099 18.0326 7.56163 18.0326C8.38228 18.0326 9.16932 17.7066 9.7496 17.1263L10.2601 16.6159C10.3558 16.52 10.4696 16.4439 10.5948 16.392C10.72 16.3401 10.8542 16.3134 10.9897 16.3134C11.1252 16.3134 11.2594 16.3401 11.3846 16.392C11.5098 16.4439 11.6235 16.52 11.7193 16.6159ZM18.0855 4.41273C17.1175 3.44693 15.8058 2.90453 14.4384 2.90453C13.0709 2.90453 11.7592 3.44693 10.7912 4.41273L10.2807 4.9232C10.087 5.11693 9.97813 5.37969 9.97813 5.65367C9.97813 5.92765 10.087 6.19041 10.2807 6.38414C10.4744 6.57787 10.7372 6.68671 11.0112 6.68671C11.2851 6.68671 11.5479 6.57787 11.7416 6.38414L12.2521 5.87367C12.8324 5.29339 13.6194 4.96738 14.4401 4.96738C15.2607 4.96738 16.0478 5.29339 16.628 5.87367C17.2083 6.45396 17.5343 7.24099 17.5343 8.06164C17.5343 8.88229 17.2083 9.66932 16.628 10.2496L14.5561 12.3224C13.9979 12.8803 13.2476 13.2038 12.4587 13.2266C11.6698 13.2494 10.9021 12.9699 10.3125 12.4453C10.2109 12.355 10.0926 12.2856 9.96418 12.2411C9.83579 12.1965 9.69989 12.1777 9.56423 12.1857C9.42857 12.1937 9.29581 12.2283 9.17353 12.2876C9.05124 12.3469 8.94184 12.4297 8.85156 12.5312C8.76127 12.6328 8.69188 12.7512 8.64734 12.8796C8.60279 13.008 8.58397 13.1439 8.59195 13.2795C8.59993 13.4152 8.63456 13.5479 8.69384 13.6702C8.75313 13.7925 8.83592 13.9019 8.93749 13.9922C9.9206 14.8661 11.2005 15.3312 12.5153 15.2924C13.8301 15.2535 15.0803 14.7137 16.0101 13.7834L18.083 11.7114C19.0499 10.7436 19.5933 9.43156 19.5937 8.06346C19.5942 6.69536 19.0518 5.38298 18.0855 4.41445V4.41273Z"
              fill={theme() === "light" ? DARK_ICON_COLOR : LIGHT_ICON_COLOR}
              fill-opacity={selectedOption() === "qr" ? "0.7" : "1"}
            />
          </svg>
          Short URL
        </div>
        <div
          class="bg-background px-6 py-3 rounded-tl-md rounded-tr-md hover:bg-primary hover:cursor-pointer z-10 flex flex-row items-center justify-center gap-2 text-text font-poppins"
          onClick={() => setSelectedOption("qr")}
          classList={{
            "border-t-2 border-l-2 border-r-2 border-primary":
              selectedOption() === "qr",
          }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="22"
            height="23"
            viewBox="0 0 22 23"
            fill="none"
          >
            <g clip-path="url(#clip0_11_86)">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M12.8333 12.4167C13.0579 12.4167 13.2746 12.4991 13.4423 12.6483C13.6101 12.7975 13.7173 13.0031 13.7436 13.2261L13.75 13.3333V18.8333C13.7497 19.067 13.6603 19.2917 13.4999 19.4616C13.3395 19.6315 13.1203 19.7337 12.8871 19.7474C12.6538 19.7611 12.4242 19.6852 12.245 19.5353C12.0658 19.3853 11.9507 19.1726 11.9231 18.9406L11.9167 18.8333V13.3333C11.9167 13.0902 12.0132 12.8571 12.1852 12.6852C12.3571 12.5132 12.5902 12.4167 12.8333 12.4167ZM15.5833 16.5417C15.8264 16.5417 16.0596 16.6382 16.2315 16.8102C16.4034 16.9821 16.5 17.2152 16.5 17.4583V18.8333C16.5 19.0764 16.4034 19.3096 16.2315 19.4815C16.0596 19.6534 15.8264 19.75 15.5833 19.75C15.3402 19.75 15.1071 19.6534 14.9352 19.4815C14.7632 19.3096 14.6667 19.0764 14.6667 18.8333V17.4583C14.6667 17.2152 14.7632 16.9821 14.9352 16.8102C15.1071 16.6382 15.3402 16.5417 15.5833 16.5417ZM18.3333 12.4167C18.5579 12.4167 18.7746 12.4991 18.9423 12.6483C19.1101 12.7975 19.2173 13.0031 19.2436 13.2261L19.25 13.3333V18.8333C19.2497 19.067 19.1603 19.2917 18.9999 19.4616C18.8395 19.6315 18.6203 19.7337 18.3871 19.7474C18.1538 19.7611 17.9242 19.6852 17.745 19.5353C17.5658 19.3853 17.4507 19.1726 17.4231 18.9406L17.4167 18.8333V13.3333C17.4167 13.0902 17.5132 12.8571 17.6852 12.6852C17.8571 12.5132 18.0902 12.4167 18.3333 12.4167ZM8.25 12.4167C8.73623 12.4167 9.20255 12.6098 9.54636 12.9536C9.89018 13.2975 10.0833 13.7638 10.0833 14.25V17.9167C10.0833 18.4029 9.89018 18.8692 9.54636 19.213C9.20255 19.5568 8.73623 19.75 8.25 19.75H4.58333C4.0971 19.75 3.63079 19.5568 3.28697 19.213C2.94315 18.8692 2.75 18.4029 2.75 17.9167V14.25C2.75 13.7638 2.94315 13.2975 3.28697 12.9536C3.63079 12.6098 4.0971 12.4167 4.58333 12.4167H8.25ZM8.25 14.25H4.58333V17.9167H8.25V14.25ZM15.5833 12.4167C15.8079 12.4167 16.0246 12.4991 16.1923 12.6483C16.3601 12.7975 16.4673 13.0031 16.4936 13.2261L16.5 13.3333V14.7083C16.4997 14.942 16.4103 15.1667 16.2499 15.3366C16.0895 15.5065 15.8703 15.6087 15.6371 15.6224C15.4038 15.6361 15.1742 15.5602 14.995 15.4103C14.8158 15.2603 14.7007 15.0476 14.6731 14.8156L14.6667 14.7083V13.3333C14.6667 13.0902 14.7632 12.8571 14.9352 12.6852C15.1071 12.5132 15.3402 12.4167 15.5833 12.4167ZM8.25 3.25C8.73623 3.25 9.20255 3.44315 9.54636 3.78697C9.89018 4.13079 10.0833 4.5971 10.0833 5.08333V8.75C10.0833 9.23623 9.89018 9.70255 9.54636 10.0464C9.20255 10.3902 8.73623 10.5833 8.25 10.5833H4.58333C4.0971 10.5833 3.63079 10.3902 3.28697 10.0464C2.94315 9.70255 2.75 9.23623 2.75 8.75V5.08333C2.75 4.5971 2.94315 4.13079 3.28697 3.78697C3.63079 3.44315 4.0971 3.25 4.58333 3.25H8.25ZM17.4167 3.25C17.9029 3.25 18.3692 3.44315 18.713 3.78697C19.0568 4.13079 19.25 4.5971 19.25 5.08333V8.75C19.25 9.23623 19.0568 9.70255 18.713 10.0464C18.3692 10.3902 17.9029 10.5833 17.4167 10.5833H13.75C13.2638 10.5833 12.7975 10.3902 12.4536 10.0464C12.1098 9.70255 11.9167 9.23623 11.9167 8.75V5.08333C11.9167 4.5971 12.1098 4.13079 12.4536 3.78697C12.7975 3.44315 13.2638 3.25 13.75 3.25H17.4167ZM8.25 5.08333H4.58333V8.75H8.25V5.08333ZM17.4167 5.08333H13.75V8.75H17.4167V5.08333Z"
                fill={theme() === "light" ? DARK_ICON_COLOR : LIGHT_ICON_COLOR}
                fill-opacity={selectedOption() === "qr" ? "1" : "0.7"}
              />
            </g>
            <defs>
              <clipPath id="clip0_11_86">
                <path
                  d="M0 5.5C0 2.73858 2.23858 0.5 5 0.5H17C19.7614 0.5 22 2.73858 22 5.5V22.5H0V5.5Z"
                  fill="white"
                />
              </clipPath>
            </defs>
          </svg>
          QR Code
        </div>
      </div>
      <div
        class="bg-background rounded-md w-[55%] h-72 -mt-[1px]"
        classList={{
          "main-box-dark-shadow": theme() === "light",
          "main-box-light-shadow": theme() === "dark",
        }}
      >
        <Show when={selectedOption() === "shorturl"} fallback={<QRCode />}>
          <URLShortener />
        </Show>
      </div>
    </div>
  );
}

export { MainBox };
